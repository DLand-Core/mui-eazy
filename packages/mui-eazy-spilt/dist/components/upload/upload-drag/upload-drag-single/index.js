import{__rest as e,__assign as o,__awaiter as t,__generator as r,__spreadArray as i}from"../../../../node_modules/.pnpm/@rollup_plugin-typescript@11.1.6_rollup@4.9.6_tslib@2.6.2_typescript@5.3.3/node_modules/tslib/tslib.es6.js";import{j as n}from"../../../../node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js";import{useState as l,useEffect as s}from"react";import{useDropzone as a}from"../../../../node_modules/.pnpm/react-dropzone@14.2.3_react@18.2.0/node_modules/react-dropzone/dist/es/index.js";import m from"./preview-single-file.js";import c from"../../ic-eva_cloud-upload-fill.svg.js";import{CircularProgress as d}from"@mui/material";import{useBoolean as p}from"../../../../hooks/use-boolean.js";import u from"../../../../node_modules/.pnpm/@mui_material@5.15.5_@emotion_react@11.5.0_@emotion_styled@11.6.0_@types_react@18.2.51_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Stack/Stack.js";import _ from"../../../../node_modules/.pnpm/@mui_material@5.15.5_@emotion_react@11.5.0_@emotion_styled@11.6.0_@types_react@18.2.51_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Box/Box.js";import f from"../../../../node_modules/.pnpm/@mui_material@5.15.5_@emotion_react@11.5.0_@emotion_styled@11.6.0_@types_react@18.2.51_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/Typography/Typography.js";import x from"../../../../node_modules/.pnpm/@mui_material@5.15.5_@emotion_react@11.5.0_@emotion_styled@11.6.0_@types_react@18.2.51_react-dom@18.2.0_react@18.2.0/node_modules/@mui/material/IconButton/IconButton.js";import{alpha as g}from"@mui/system";import{Iconify as h}from"../../../iconify/iconify.js";function y(y){var j=this,v=y.disabled,b=y.multiple,k=void 0!==b&&b,A=y.error,w=y.placeholder,D=y.helperText,I=y.onDel,z=y.files,B=y.onAdd,R=y.sx,S=y.uploadAction,T=e(y,["disabled","multiple","error","placeholder","helperText","onDel","onDelete","files","thumbnail","onUpload","onRemove","onAdd","onRemoveAll","sx","uploadAction"]),C=p(!1),E=l(z||[]),F=E[0],P=E[1],U=l([]),G=U[0],W=U[1],q=a(o({multiple:k,disabled:v,onDropAccepted:function(){document.body.focus()},onDrop:function(e){return t(j,void 0,void 0,(function(){var o;return r(this,(function(t){switch(t.label){case 0:return C.onTrue(),[4,null==S?void 0:S(e[0])];case 1:return o=t.sent(),C.onFalse(),o&&(null==B||B(o),W(i(i([],G,!0),e,!0))),[2]}}))}))}},T)),H=q.getRootProps,J=q.getInputProps,K=q.isDragActive,L=q.isDragReject;s((function(){z&&P(z)}),[z]);var M=F.length>0,N=L||!!A,O=n.jsxs(u,{spacing:3,alignItems:"center",justifyContent:"center",flexWrap:"wrap",children:[n.jsx(_,{component:"img",src:c,sx:o({width:52,height:52,flexShrink:0},R)}),n.jsx(u,{spacing:1,sx:{textAlign:"center"},children:w||n.jsx(f,{sx:{color:"#919EAB",fontSize:"14px"},children:"Drag and drop or click to choose files"})})]}),Q=!k&&n.jsx(m,{imgUrl:"string"==typeof(null==F?void 0:F[0])?null==F?void 0:F[0]:""}),V=M&&I&&n.jsx(x,{size:"small",onClick:function(){null==I||I(null==F?void 0:F[0])},sx:{top:16,right:16,zIndex:9,position:"absolute",color:function(e){return g(e.palette.common.white,.8)},bgcolor:function(e){return g(e.palette.grey[900],.72)},"&:hover":{bgcolor:function(e){return g(e.palette.grey[900],.48)}}},children:n.jsx(h,{icon:"mingcute:close-line",width:18})});return n.jsxs(_,{sx:o({width:1,position:"relative"},R),children:[n.jsxs(_,o({},H(),{sx:o(o(o(o({p:5,outline:"none",borderRadius:"var(--radius-15, 12px)",cursor:"pointer",overflow:"hidden",position:"relative",background:"var(--grey-8, rgba(145, 158, 171, 0.08))",border:"1px dashed var(--Scaling-Grey2, #696969)",transition:function(e){return e.transitions.create(["opacity","padding"])},"&:hover":{opacity:.72}},K&&{opacity:.72}),v&&{opacity:.48,pointerEvents:"none"}),N&&{color:"error.main",borderColor:"error.main",bgcolor:function(e){return g(e.palette.error.main,.08)}}),M&&{padding:"24% 0"}),children:[n.jsx("input",o({},J())),M?Q:O,C.value&&n.jsx(_,{sx:{position:"absolute",top:0,bottom:0,left:0,right:0,background:"rgba(255,255,255,0.1)",backdropFilter:"blur(5px)",display:"flex",justifyContent:"center",alignItems:"center"},children:n.jsx(d,{color:"inherit"})})]})),V,D&&D]})}export{y as UploadDragSingle};
